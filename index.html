<!DOCTYPE html>
<html>
<head>
  <title>MARVIN REMOTE</title>
  <link rel="stylesheet" href="MARVIN.css">
  <style>
    .control-button {
      font-size: 24px;
      padding: 10px 20px;
    }
    .slider-container {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div class="control-panel">
    <button class="control-button" onclick="sendCommand('forward')">↑</button>
    <button class="control-button" onclick="sendCommand('backward')">↓</button>
    <button class="control-button" onclick="sendCommand('left')">↑</button>
    <button class="control-button" onclick="sendCommand('right')">↑</button>
  </div>

  <div class="slider-container">
    <label>Motor Speed: <span id="speedValue">50</span>%</label>
    <input type="range" min="0" max="100" value="50" id="speedSlider">
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAOzao-DNV82JcF0aFHed17VBYhwqsAbZ8",
      authDomain: "marvin-41a93.firebaseapp.com",
      databaseURL: "https://marvin-41a93-default-rtdb.firebaseio.com/",
      projectId: "marvin-41a93",
      storageBucket: "marvin-41a93.appspot.com",
      messagingSenderId: "164997235406",
      appId: "1:164997235406:web:d5d3152bd84b0df33e069f",
      measurementId: "G-GT4J6E14DX"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.sendCommand = function(command) {
      set(ref(db, "/marvinBot/command"), command)
        .then(() => console.log("✅ Command:", command))
        .catch((error) => console.error("❌ Command error:", error));
    };

    const slider = document.getElementById("speedSlider");
    const speedValue = document.getElementById("speedValue");

    slider.addEventListener("input", function () {
      const speed = parseInt(this.value);
      speedValue.innerText = speed;
      set(ref(db, "/marvinBot/speed"), speed)
        .then(() => console.log("✅ Speed:", speed))
        .catch((error) => console.error("❌ Speed error:", error));
    });
  </script>
</body>
</html>

